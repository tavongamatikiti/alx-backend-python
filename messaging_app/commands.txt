# Commands for Setting Up Kubernetes Ingress

# Step 1: Enable Nginx Ingress controller in Minikube
minikube addons enable ingress

# Step 2: Verify Ingress controller is running
kubectl get pods -n ingress-nginx

# Step 3: Apply the Ingress configuration
kubectl apply -f ingress.yaml

# Step 4: Verify Ingress resource is created
kubectl get ingress

# Step 5: Describe Ingress to see details
kubectl describe ingress django-ingress

# Step 6: Get Minikube IP address
minikube ip

# Step 7: Add host entry to /etc/hosts (replace <MINIKUBE_IP> with actual IP)
# echo "<MINIKUBE_IP> messaging.local" | sudo tee -a /etc/hosts

# Step 8: Test the Ingress endpoints
# curl http://messaging.local/
# curl http://messaging.local/api/
# curl http://messaging.local/admin/

# Step 9: Access via Minikube service (alternative)
minikube service django-service --url

# Step 10: Monitor Ingress logs
kubectl logs -n ingress-nginx -l app.kubernetes.io/name=ingress-nginx
